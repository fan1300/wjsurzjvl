<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>몬스터 잡기 게임</title>
    </head>
    <body>

        <div id="container"></div>
        <button id="attackButton">추가 공격!</button>

        <script>
            let monsterHP = 100
            const container = document.getElementById("container")
            const h1 = document.createElement("h1")
            h1.textContent = "몬스터 잡기 게임을 시작합니다!"
            container.appendChild(h1)

            let attackCount = 0;

            function attackMonster(attackDamage) {
                monsterHP -= attackDamage;
                attackCount += 1;

                const p = document.createElement("p")
                p.textContent = `몬스터를 ${attackCount}회 공격했다!`;
                container.append(p);

                const strong = document.createElement("strong")
                strong.textContent = `몬스터의 남은 HP는 ${Math.max(0, monsterHP)}입니다!`;
                container.append(strong);

                if (monsterHP <= 0) {
                    endGame();
                }
            }

            function endGame() {
                const h2 = document.createElement("h2");
                h2.textContent = "몬스터 잡기 완료! 수고하셨습니다~!";
                h2.style.color = "orange";
                h2.title = "게임을 다시 시작하고 싶으면 새로고침하세요";
                container.appendChild(h2);
            }

            function startGame() {
                let attackDamage = parseInt(prompt("1회 공격시 데미지는? (양의 정수)"));

                if (attackDamage > 0) {
                    attackMonster(attackDamage);
                } else {
                    alert("데미지를 잘못 입력하여 게임을 취소합니다!");
                }
            }

            startGame();

            function handleAdditionalAttack() {
                let additionalDamage = parseInt(prompt("추가 공격시 데미지는? (양의 정수)"));

                if (additionalDamage > 0) {
                    attackMonster(additionalDamage);
                } else {
                    alert("데미지를 잘못 입력하여 추가 공격을 취소합니다!");
                }
            }

            document.getElementById("attackButton").addEventListener("click", handleAdditionalAttack);

        </script>

    </body>
</html>
